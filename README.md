# 相次相続控除額 計算シミュレーター

**世界クラスの相続税計算アプリケーション** - 2025年最新のUI/UXとアクセシビリティを備えた相次相続控除計算ツール

## 🎯 プロジェクト概要

相次相続控除額計算シミュレーターは、日本の相続税法における「相次相続控除」を専門知識がなくても簡単に計算できるウェブアプリケーションです。

### 使命
**「難しい判断を多くの人が容易に行えるようにする」**

相続という人生で最も重要な判断の一つにおいて、専門知識がなくても正確で信頼できる計算ツールを提供することで、誰もが安心して相続に向き合える世界を実現します。

### 対象ユーザー
- **相続人（一般ユーザー）**: 相次相続控除の計算方法が分からない、税理士に相談する前に概算を知りたい
- **税理士**: 相続税申告の経験が少なく、相次相続控除の計算に不安
- **相続対策コンサルタント**: クライアントの信頼を得るため、専門性を示したい

## ✨ 主要機能

### 🧮 計算機能
- **リアルタイム計算**: 入力値の変更に応じて即座に計算結果を表示
- **詳細な計算過程**: 各計算ステップを透明性を持って表示
- **正確性の保証**: 国税庁の資料に基づく正確な計算式

### 🎨 ユーザーインターフェース
- **2025年最新デザイン**: モダンなUI/UXデザイン
- **レスポンシブ対応**: デスクトップ、タブレット、スマートフォンに対応
- **アクセシビリティ**: WCAG AA準拠、スクリーンリーダー対応
- **ダークモード対応**: ユーザーの好みに応じた表示

### 🔧 高度な機能
- **テンプレートシステム**: 一般的な家族構成のテンプレートを提供
- **家系図視覚化**: 相続関係を視覚的に表示
- **データエクスポート/インポート**: 計算結果の保存と共有
- **キーボードショートカット**: 効率的な操作

## 🏗️ アーキテクチャ

### 技術スタック
- **フロントエンド**: Vanilla JavaScript (ES6+)
- **スタイリング**: Tailwind CSS
- **アイコン**: Lucide Icons
- **フォント**: Inter + Noto Sans JP
- **デプロイ**: Vercel (静的サイト)

### モジュール構成
```
src/
├── script.js          # メインアプリケーション
├── state.js           # 状態管理
├── calculator.js      # 計算エンジン
├── ui.js             # UI管理
├── validation.js     # バリデーション
├── accessibility.js  # アクセシビリティ
├── performance.js    # パフォーマンス監視
└── templates.js      # テンプレート定義
```

### 設計原則
- **モジュラー設計**: 機能ごとに分離されたモジュール
- **クラスベース**: オブジェクト指向プログラミング
- **イミュータブル状態**: 予測可能な状態管理
- **パフォーマンス最適化**: 効率的な計算とレンダリング

## 🚀 セットアップ

### 前提条件
- Node.js 16以上
- モダンブラウザ（Chrome 90+, Firefox 88+, Safari 14+, Edge 90+）

### インストール
```bash
# リポジトリのクローン
git clone https://github.com/your-username/inheritance-tax-calculator.git
cd inheritance-tax-calculator

# 依存関係のインストール（必要な場合）
npm install

# ローカルサーバーの起動
npx serve .
```

### 開発環境
```bash
# 開発サーバーの起動
npm run dev

# ビルド
npm run build

# テスト
npm test
```

## 📖 使用方法

### 基本的な使い方

1. **テンプレート選択**
   - アプリケーション起動時にテンプレート選択画面が表示されます
   - 一般的な家族構成から選択するか、空白から開始できます

2. **データ入力**
   - 5つの入力項目（A〜E）に必要な情報を入力します
   - 各項目にはヘルプアイコンがあり、詳細な説明を確認できます

3. **計算実行**
   - 入力値の変更に応じてリアルタイムで計算が実行されます
   - 計算結果は即座に表示されます

4. **結果確認**
   - 計算過程の詳細を確認できます
   - 家系図で相続関係を視覚的に確認できます

### 入力項目の説明

| 項目 | 説明 | 入力例 |
|------|------|--------|
| A | 前回の相続で納めた相続税額 | 5,000,000円 |
| B | 前回に取得した財産の価額 | 80,000,000円 |
| C | 今回の相続財産の総額 | 100,000,000円 |
| D | 今回取得した財産の価額 | 50,000,000円 |
| E | 前回の相続からの経過年数 | 5年 |

### 計算式
```
相次相続控除額 = A × (C/(B-A)) × (D/C) × (10-E)/10
```

## 🎨 デザインシステム

### カラーパレット
- **プライマリ**: Blue 600 (#2563eb)
- **セカンダリ**: Indigo 600 (#4f46e5)
- **サクセス**: Green 600 (#16a34a)
- **ワーニング**: Yellow 600 (#d97706)
- **エラー**: Red 600 (#dc2626)

### タイポグラフィ
- **フォント**: Inter + Noto Sans JP
- **ウェイト**: 300, 400, 500, 600, 700
- **ベースサイズ**: 16px

### スペーシング
- **スケール**: 0.25rem, 0.5rem, 1rem, 1.5rem, 2rem, 3rem, 4rem
- **コンテナ**: max-width 1280px

## ♿ アクセシビリティ

### WCAG AA準拠
- **コントラスト比**: 4.5:1以上
- **キーボード操作**: 全機能をキーボードで操作可能
- **スクリーンリーダー**: 適切なARIA属性とセマンティックHTML

### 支援機能
- **スキップリンク**: メインコンテンツへの直接移動
- **フォーカス管理**: 明確なフォーカスインジケーター
- **エラー通知**: スクリーンリーダーでのエラー読み上げ
- **モーション削減**: ユーザーの設定に応じたアニメーション制御

## 📊 パフォーマンス

### 最適化
- **レンダリング**: 仮想DOMによる効率的な更新
- **計算**: デバウンス処理による過度な計算の防止
- **メモリ**: 適切なメモリ管理とリーク防止
- **ネットワーク**: リソースの最適化とキャッシュ戦略

### 監視
- **ロード時間**: ページロード時間の監視
- **計算時間**: 計算処理時間の測定
- **メモリ使用量**: メモリ使用量の追跡
- **インタラクション**: ユーザーインタラクションの応答時間

## 🧪 テスト

### テスト戦略
- **ユニットテスト**: 各モジュールの個別テスト
- **統合テスト**: モジュール間の連携テスト
- **E2Eテスト**: ユーザーシナリオベースのテスト
- **アクセシビリティテスト**: アクセシビリティ要件の検証

### テスト実行
```bash
# 全テストの実行
npm test

# 特定のテストの実行
npm test -- --grep "計算機能"

# カバレッジレポート
npm run test:coverage
```

## 📈 監修・品質保証

### 監修
- **株式会社Profomer**: 税理士法人による監修
- **最新性**: 2025年税制改正に対応
- **正確性**: 国税庁資料に基づく計算式

### 品質保証
- **コードレビュー**: 厳格なコードレビュープロセス
- **静的解析**: ESLint、Prettierによるコード品質管理
- **パフォーマンス監視**: 継続的なパフォーマンス測定
- **ユーザーテスト**: 実際のユーザーによる使用感テスト

## 🤝 コントリビューション

### 開発ガイドライン
1. **フォーク**: リポジトリをフォーク
2. **ブランチ**: 機能ブランチを作成
3. **開発**: 機能を実装
4. **テスト**: テストを追加・実行
5. **プルリクエスト**: レビューを依頼

### コーディング規約
- **ESLint**: コードスタイルの統一
- **Prettier**: コードフォーマット
- **コミットメッセージ**: 規約に従ったコミットメッセージ
- **ドキュメント**: 適切なコメントとドキュメント

## 📄 ライセンス

このプロジェクトは [MIT License](LICENSE) の下で公開されています。

## 📞 サポート

### お問い合わせ
- **メール**: support@profomer.co.jp
- **電話**: 03-XXXX-XXXX
- **営業時間**: 平日 9:00-18:00

### よくある質問
詳細は [FAQ.md](docs/FAQ.md) をご覧ください。

### バグ報告
バグを発見された場合は、[Issues](https://github.com/your-username/inheritance-tax-calculator/issues) で報告してください。

## 🔄 更新履歴

### v2.0.0 (2025-01-XX)
- 🎉 完全リニューアル
- ✨ 2025年最新デザインシステム
- ♿ WCAG AA準拠のアクセシビリティ
- 📱 完全レスポンシブ対応
- 🚀 パフォーマンス最適化

### v1.0.0 (2024-XX-XX)
- 🎯 初回リリース
- 🧮 基本的な計算機能
- 📊 計算過程の表示

---

**株式会社Profomer** - 相続税計算の専門家

*このアプリケーションは、相続税の計算を支援するツールです。実際の申告には、必ず税理士にご相談ください。* 